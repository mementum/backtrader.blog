<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Data - Multiple Timeframes &mdash; backtrader  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/sphinxcontrib-images\LightBox2\lightbox2\css\lightbox.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/sphinxcontrib-images\LightBox2\lightbox2\js\jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/sphinxcontrib-images\LightBox2\lightbox2\js\lightbox.min.js"></script>
    <script type="text/javascript" src="../../../_static/sphinxcontrib-images\LightBox2\lightbox2-customize\jquery-noconflict.js"></script>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="top" title="backtrader  documentation" href="../../../" />
  
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  
  
  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.post-list-style-disc {list-style-type: disc;}
    ul.post-list-style-none {list-style-type: none;}
    ul.post-list-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-multiple-timeframes">
<h1>Data - Multiple Timeframes<a class="headerlink" href="#data-multiple-timeframes" title="Permalink to this headline">¶</a></h1>
<p>Sometimes investing decisions are taken using different timeframes:</p>
<blockquote>
<div><ul class="simple">
<li>Weekly to evaluate the trend</li>
<li>Daily to execute the entry</li>
</ul>
</div></blockquote>
<p>Or 5 minutes vs 60 minutes.</p>
<p>That implies that combining datas of multiple timeframes in <code class="docutils literal"><span class="pre">backtrader</span></code> is
needed to support such combinations.</p>
<p>Native support for it is already built-in. The end user must only follow these
rules:</p>
<blockquote>
<div><ul class="simple">
<li>The data with the smallest timeframe (and thus the larger number of bars)
must be the 1st one to be added to the Cerebro instance</li>
<li>The datas must be properly date-time aligned for the platform to make any
sense out of them</li>
</ul>
</div></blockquote>
<p>Beyond that, the end-user is free to apply indicators as wished on the
shorter/larger timeframes. Of course:</p>
<blockquote>
<div><ul class="simple">
<li>Indicators applied to larger timeframes will produce less bars</li>
</ul>
</div></blockquote>
<p>The platform will also have the following into account</p>
<blockquote>
<div><ul class="simple">
<li>The minimum period for larger timeframes</li>
</ul>
</div></blockquote>
<p>Minimum period which will probably have the side effect of having to consume
several orders of magnitude of the smaller timeframe bars before a Strategy
added to Cerebro kicks into action.</p>
<p>The built-in <code class="docutils literal"><span class="pre">DataResampler</span></code> is going to be used to create a larger timeframe.</p>
<p>Some examples below, but first the sauce of the test script.</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="c"># Load the Data</span>
    <span class="n">datapath</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">dataname</span> <span class="ow">or</span> <span class="s">&#39;../datas/sample/2006-day-001.txt&#39;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">btfeeds</span><span class="o">.</span><span class="n">BacktraderCSVData</span><span class="p">(</span>
        <span class="n">dataname</span><span class="o">=</span><span class="n">datapath</span><span class="p">)</span>

    <span class="n">tframes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">daily</span><span class="o">=</span><span class="n">bt</span><span class="o">.</span><span class="n">TimeFrame</span><span class="o">.</span><span class="n">Days</span><span class="p">,</span>
        <span class="n">weekly</span><span class="o">=</span><span class="n">bt</span><span class="o">.</span><span class="n">TimeFrame</span><span class="o">.</span><span class="n">Weeks</span><span class="p">,</span>
        <span class="n">monthly</span><span class="o">=</span><span class="n">bt</span><span class="o">.</span><span class="n">TimeFrame</span><span class="o">.</span><span class="n">Months</span><span class="p">)</span>

    <span class="c"># Handy dictionary for the argument timeframe conversion</span>
    <span class="c"># Resample the data</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">noresample</span><span class="p">:</span>
        <span class="n">datapath</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">dataname2</span> <span class="ow">or</span> <span class="s">&#39;../datas/sample/2006-week-001.txt&#39;</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">btfeeds</span><span class="o">.</span><span class="n">BacktraderCSVData</span><span class="p">(</span>
            <span class="n">dataname</span><span class="o">=</span><span class="n">datapath</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">DataResampler</span><span class="p">(</span>
            <span class="n">dataname</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">timeframe</span><span class="o">=</span><span class="n">tframes</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">timeframe</span><span class="p">],</span>
            <span class="n">compression</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">compression</span><span class="p">)</span>
</pre></div>
</div>
<p>The steps:</p>
<blockquote>
<div><ul>
<li><p class="first">Load a data</p>
</li>
<li><p class="first">Resample it according to the user specified arguments</p>
<p>The script also allows for loading a 2nd data</p>
</li>
<li><p class="first">Add the data to cerebro</p>
</li>
<li><p class="first">Add the resampled data (larger timeframe) to cerebro</p>
</li>
<li><p class="first">run</p>
</li>
</ul>
</div></blockquote>
<div class="section" id="example-1-daily-and-weekly">
<h2>Example 1 - Daily and Weekly<a class="headerlink" href="#example-1-daily-and-weekly" title="Permalink to this headline">¶</a></h2>
<p>The invocation of the script:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./multitimeframe-example.py --timeframe weekly --compression 1
</pre></div>
</div>
<p>And the output chart:</p>
<a data-lightbox="group-1487e440-bbe0-40d4-b1f8-f71542750967"
                   href="../../../_images\multitimeframe-daily-weekly1.png"
                   class=""
                   title=""
                   data-title=""
                   ><img src="../../../_images\multitimeframe-daily-weekly1.png"
                    class=""
                    width="100%"
                    height="auto"
                    alt=""/>
                    </a></div>
<div class="section" id="example-2-daily-and-daily-compression-2-bars-to-1">
<h2>Example 2 - Daily and Daily Compression (2 bars to 1)<a class="headerlink" href="#example-2-daily-and-daily-compression-2-bars-to-1" title="Permalink to this headline">¶</a></h2>
<p>The invocation of the script:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./multitimeframe-example.py --timeframe daily --compression 2
</pre></div>
</div>
<p>And the output chart:</p>
<a data-lightbox="group-672c59e4-f809-4a93-8ddf-6f9a76caa966"
                   href="../../../_images\multitimeframe-daily-daily-21.png"
                   class=""
                   title=""
                   data-title=""
                   ><img src="../../../_images\multitimeframe-daily-daily-21.png"
                    class=""
                    width="100%"
                    height="auto"
                    alt=""/>
                    </a></div>
<div class="section" id="example-3-strategy-with-sma">
<h2>Example 3 - Strategy with SMA<a class="headerlink" href="#example-3-strategy-with-sma" title="Permalink to this headline">¶</a></h2>
<p>Although plotting is nice, the key issue here is showing how the larger
timeframe influences the system, especially when it comes down to the starting
point</p>
<p>The script can take a <code class="docutils literal"><span class="pre">--indicators</span></code> to add a strategy which creates simple
moving averages of <strong>period 10</strong> on the smaller an larger timeframe datas.</p>
<p>If only the smaller timeframe was taken into account:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">next</span></code> would be called first after 10 bars, which is the time the Simple
Moving Average needs to produce a value</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember that Strategy monitors created indicators and only calls
<code class="docutils literal"><span class="pre">next</span></code> when all indicators have produced a value. The rationale is that
the end user has added the indicators to use them in the logic and thus
no logic should take place if the indicators have produced no values</p>
</div>
</li>
</ul>
</div></blockquote>
<p>But in this case the larger timeframe (weekly) delays the invocation of <code class="docutils literal"><span class="pre">next</span></code>
until the Simple Moving Average oon the weekly data has produced a value, which
takes ... 10 weeks.</p>
<p>The script overrides <code class="docutils literal"><span class="pre">nextstart</span></code> which is only called once and which defaults
to calling <code class="docutils literal"><span class="pre">next</span></code> to show when it is first called.</p>
<div class="section" id="invocation-1">
<h3>Invocation 1:<a class="headerlink" href="#invocation-1" title="Permalink to this headline">¶</a></h3>
<p>Only the smaller timeframe, daily, gets a Simple Moving Average</p>
<p>The command line and output</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./multitimeframe-example.py --timeframe weekly --compression 1 --indicators --onlydaily
--------------------------------------------------
nextstart called with len 10
--------------------------------------------------
</pre></div>
</div>
<p>And the chart.</p>
<a data-lightbox="group-a730b074-592d-4400-995d-fb8acd221ac0"
                   href="../../../_images\multitimeframe-daily-weekly-indicators-onlydaily1.png"
                   class=""
                   title=""
                   data-title=""
                   ><img src="../../../_images\multitimeframe-daily-weekly-indicators-onlydaily1.png"
                    class=""
                    width="100%"
                    height="auto"
                    alt=""/>
                    </a></div>
<div class="section" id="invocation-2">
<h3>Invocation 2:<a class="headerlink" href="#invocation-2" title="Permalink to this headline">¶</a></h3>
<p>Both timeframes get a Simple Moving Average</p>
<p>The command line:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./multitimeframe-example.py --timeframe weekly --compression 1 --indicators
--------------------------------------------------
nextstart called with len 50
--------------------------------------------------
--------------------------------------------------
nextstart called with len 51
--------------------------------------------------
--------------------------------------------------
nextstart called with len 52
--------------------------------------------------
--------------------------------------------------
nextstart called with len 53
--------------------------------------------------
--------------------------------------------------
nextstart called with len 54
--------------------------------------------------
</pre></div>
</div>
<p>Two things to notice here:</p>
<blockquote>
<div><ul>
<li><p class="first">Instead of being called after <strong>10</strong> periods, the strategy is 1st called
after 50 periods.</p>
<p>It is so because the Simple Moving Average applied on the larger (weekly)
timeframe produces a value after 10 weeks ... and that is 10 weeks * 5 days
/ week ... 50 days</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">nextstart</span></code> gets called 5 times rather than only 1.</p>
<p>This is a natural side effect of having mixed the timeframe and having (in
this case only one) indicators applied to the larger timeframe.</p>
<p>The larger timeframe Simple Moving Average produces 5 times the same value
whilst 5 daily bars are being consumed.</p>
<p>And because the start of the period is being controlled by the larger
timeframe <code class="docutils literal"><span class="pre">nextstart</span></code> gets called 5 times.</p>
</li>
</ul>
</div></blockquote>
<p>And the chart.</p>
<a data-lightbox="group-c02151d0-9cb3-400e-97c7-cb8d6d0454d4"
                   href="../../../_images\multitimeframe-daily-weekly-indicators1.png"
                   class=""
                   title=""
                   data-title=""
                   ><img src="../../../_images\multitimeframe-daily-weekly-indicators1.png"
                    class=""
                    width="100%"
                    height="auto"
                    alt=""/>
                    </a></div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>Multiple Timeframe Datas can be used in <code class="docutils literal"><span class="pre">backtrader</span></code> with no special objects
or tweaking: just add the smaller timeframes first.</p>
<p>The test script.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">import</span> <span class="nn">backtrader</span> <span class="kn">as</span> <span class="nn">bt</span>
<span class="kn">import</span> <span class="nn">backtrader.feeds</span> <span class="kn">as</span> <span class="nn">btfeeds</span>
<span class="kn">import</span> <span class="nn">backtrader.indicators</span> <span class="kn">as</span> <span class="nn">btind</span>


<span class="k">class</span> <span class="nc">SMAStrategy</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">Strategy</span><span class="p">):</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">&#39;period&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;onlydaily&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sma_small_tf</span> <span class="o">=</span> <span class="n">btind</span><span class="o">.</span><span class="n">SMA</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">period</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">onlydaily</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sma_large_tf</span> <span class="o">=</span> <span class="n">btind</span><span class="o">.</span><span class="n">SMA</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data1</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">period</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">nextstart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;--------------------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;nextstart called with len&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;--------------------------------------------------&#39;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">SMAStrategy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">nextstart</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">runstrat</span><span class="p">():</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">()</span>

    <span class="c"># Create a cerebro entity</span>
    <span class="n">cerebro</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">Cerebro</span><span class="p">(</span><span class="n">stdstats</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c"># Add a strategy</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">indicators</span><span class="p">:</span>
        <span class="n">cerebro</span><span class="o">.</span><span class="n">addstrategy</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">Strategy</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cerebro</span><span class="o">.</span><span class="n">addstrategy</span><span class="p">(</span>
            <span class="n">SMAStrategy</span><span class="p">,</span>

            <span class="c"># args for the strategy</span>
            <span class="n">period</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">period</span><span class="p">,</span>
            <span class="n">onlydaily</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">onlydaily</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c"># Load the Data</span>
    <span class="n">datapath</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">dataname</span> <span class="ow">or</span> <span class="s">&#39;../datas/sample/2006-day-001.txt&#39;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">btfeeds</span><span class="o">.</span><span class="n">BacktraderCSVData</span><span class="p">(</span>
        <span class="n">dataname</span><span class="o">=</span><span class="n">datapath</span><span class="p">)</span>

    <span class="n">tframes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">daily</span><span class="o">=</span><span class="n">bt</span><span class="o">.</span><span class="n">TimeFrame</span><span class="o">.</span><span class="n">Days</span><span class="p">,</span>
        <span class="n">weekly</span><span class="o">=</span><span class="n">bt</span><span class="o">.</span><span class="n">TimeFrame</span><span class="o">.</span><span class="n">Weeks</span><span class="p">,</span>
        <span class="n">monthly</span><span class="o">=</span><span class="n">bt</span><span class="o">.</span><span class="n">TimeFrame</span><span class="o">.</span><span class="n">Months</span><span class="p">)</span>

    <span class="c"># Handy dictionary for the argument timeframe conversion</span>
    <span class="c"># Resample the data</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">noresample</span><span class="p">:</span>
        <span class="n">datapath</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">dataname2</span> <span class="ow">or</span> <span class="s">&#39;../datas/sample/2006-week-001.txt&#39;</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">btfeeds</span><span class="o">.</span><span class="n">BacktraderCSVData</span><span class="p">(</span>
            <span class="n">dataname</span><span class="o">=</span><span class="n">datapath</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">DataResampler</span><span class="p">(</span>
            <span class="n">dataname</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">timeframe</span><span class="o">=</span><span class="n">tframes</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">timeframe</span><span class="p">],</span>
            <span class="n">compression</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">compression</span><span class="p">)</span>

    <span class="c"># First add the original data - smaller timeframe</span>
    <span class="n">cerebro</span><span class="o">.</span><span class="n">adddata</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c"># And then the large timeframe</span>
    <span class="n">cerebro</span><span class="o">.</span><span class="n">adddata</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>

    <span class="c"># Run over everything</span>
    <span class="n">cerebro</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="c"># Plot the result</span>
    <span class="n">cerebro</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">parse_args</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s">&#39;Pandas test script&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--dataname&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;File Data to Load&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--dataname2&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Larger timeframe file to load&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--noresample&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Do not resample, rather load larger timeframe&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--timeframe&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;weekly&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;daily&#39;</span><span class="p">,</span> <span class="s">&#39;weekly&#39;</span><span class="p">,</span> <span class="s">&#39;monhtly&#39;</span><span class="p">],</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Timeframe to resample to&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--compression&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Compress n bars into 1&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--indicators&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Wether to apply Strategy with indicators&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--onlydaily&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Indicator only to be applied to daily timeframe&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--period&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Period to apply to indicator&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">runstrat</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  
  <a href="../../2015-08-23/data-resampling/">
    <i class="fa fa-arrow-circle-left"></i>
    Data Resampling
  </a>
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  
  <a href="../../2015-08-25/data-replay/">
    Data - Replay
    <i class="fa fa-arrow-circle-right"></i>
  </a>
  </span>
  
</div>

  
  
    <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'backtrader'; // required: replace example with your forum shortname
        var disqus_identifier = '/posts/2015-08-24/data-multitimeframe/';
        var disqus_title = 'Data - Multiple Timeframes';
        var disqus_url = 'http://www.backtrader.com/posts/2015-08-24/data-multitimeframe';
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  
  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../">backtrader</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=mementum&repo=backtrader&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




    

<p>
<a href="https://travis-ci.org/mementum/backtrader">
    <img
        alt="https://secure.travis-ci.org/mementum/backtrader.png?branch=master"
        src="https://secure.travis-ci.org/mementum/backtrader.png?branch=master"
    >
</a>
</p>

  
  
  <h2>
  
  <i class="fa fa-calendar"></i>
    Aug 24, 2015
  
  </h2>

  <ul>
    

  
  <li><i class="fa-fw fa fa-user"></i>
    
      
      <a href="../../../blog/author/mementum/">mementum</a>
      
    </li>
  

  

  

  

  
  
  <li>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'backtrader'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    <i class="fa-fw fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/posts/2015-08-24/data-multitimeframe/"> </a>
  </li>
  
  </ul>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/">About backtrader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/#documentation">Documentation</a></li>
</ul>


  <h3><a href="../../../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../../2015-09-03-multidata-strategy/multidata-strategy/">Sep 03 - MultiData Strategy</a></li>
    
      <li><a href="../../2015-08-27/real-world-usage/">Aug 27 - Real World Usage</a></li>
    
      <li><a href="../../2015-08-25/data-replay/">Aug 25 - Data - Replay</a></li>
    
      <li><a href="../../2015-08-23/data-resampling/">Aug 23 - Data Resampling</a></li>
    
      <li><a href="../../2015-08-21/pandas-datafeed/">Aug 21 - Pandas DataFeed Support</a></li>
    
  </ul>

  <h3><a href="../../../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../../../blog/2015/">2015 (19)</a></li>
    
  
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, mementum.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../../../_sources/posts/2015-08-24/data-multitimeframe.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/mementum/backtrader" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-2435868-6']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>